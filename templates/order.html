<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¢å•è¯¦æƒ… - å§å”§ç”Ÿæˆå™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }
        .success-card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            animation: slideInUp 0.6s ease-out;
        }
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .success-icon {
            animation: pulse 2s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
    </style>
</head>
<body class="min-h-screen py-8">
    <div class="max-w-4xl mx-auto px-4">
        <!-- æˆåŠŸçŠ¶æ€ -->
        <div class="success-card p-8 text-center mb-8">
            <div class="success-icon text-6xl mb-4">âœ¨</div>
            <h1 class="text-3xl font-bold text-gray-900 mb-2">è®¾è®¡å®Œæˆï¼</h1>
            <p class="text-gray-600 mb-6">æ‚¨çš„å§å”§å·²ç»æˆåŠŸè®¾è®¡å®Œæˆ</p>
            
            <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
                <p class="text-green-800 font-semibold">è®¢å•å·ï¼š[[ order.order_no  ]]</p>
                <p class="text-green-600 text-sm">åˆ›å»ºæ—¶é—´ï¼š[[ order.created_at[:19] ]]</p>
            </div>
            
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <a href="/download/[[ order.order_no ]]" 
                   class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors text-center">
                    ğŸ“¥ ä¸‹è½½å§å”§
                </a>
                <a href="/delivery" 
                   class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors text-center">
                    ğŸšš è®¾ç½®é…é€
                </a>
                <a href="/design" 
                   class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors text-center">
                    ğŸ¨ ç»§ç»­è®¾è®¡
                </a>
            </div>
        </div>
        
        <!-- æœ€ç»ˆå›¾ç‰‡é¢„è§ˆ -->
        [% if order.preview_image_path  %]
        <div class="success-card p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-900 mb-4">æœ€ç»ˆæ•ˆæœé¢„è§ˆ</h2>
            <div class="flex justify-center">
                <div class="relative">
                    <!-- å§å”§é¢„è§ˆå›¾ç‰‡ -->
                    <img src="/api/v1/image/[[ order.preview_image_filename ]]" 
                         alt="æœ€ç»ˆå§å”§æ•ˆæœ" 
                         class="w-64 h-64 object-contain rounded-full shadow-lg"
                         onerror="this.src='/static/images/placeholder.png'">
                    
                    <!-- å§å”§è¾¹æ¡†è£…é¥° -->
                    <div class="absolute inset-0 pointer-events-none">
                        <div class="w-full h-full rounded-full border-4 border-gray-300 opacity-50"></div>
                    </div>
                </div>
            </div>
            <p class="text-center text-gray-600 text-sm mt-4">
                è¿™æ˜¯æ‚¨çš„å§å”§æœ€ç»ˆæ•ˆæœé¢„è§ˆï¼Œå·²æŒ‰ç…§æ‚¨çš„è®¾è®¡å‚æ•°å¤„ç†å®Œæˆ
            </p>
        </div>
        [% elif order.processed_image_path  %]
        <div class="success-card p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-900 mb-4">æœ€ç»ˆæ•ˆæœé¢„è§ˆ</h2>
            <div class="flex justify-center">
                <div class="relative">
                    <!-- å§å”§é¢„è§ˆå›¾ç‰‡ -->
                    <img src="/api/v1/image/[[ order.processed_image_filename ]]" 
                         alt="æœ€ç»ˆå§å”§æ•ˆæœ" 
                         class="w-64 h-64 object-contain rounded-full shadow-lg"
                         onerror="this.src='/static/images/placeholder.png'">
                    
                    <!-- å§å”§è¾¹æ¡†è£…é¥° -->
                    <div class="absolute inset-0 pointer-events-none">
                        <div class="w-full h-full rounded-full border-4 border-gray-300 opacity-50"></div>
                    </div>
                </div>
            </div>
            <p class="text-center text-gray-600 text-sm mt-4">
                è¿™æ˜¯æ‚¨çš„å§å”§æœ€ç»ˆæ•ˆæœï¼Œå·²æŒ‰ç…§æ‚¨çš„è®¾è®¡å‚æ•°å¤„ç†å®Œæˆ
            </p>
        </div>
        [% endif  %]
        
        <!-- è®¢å•è¯¦æƒ… -->
        <div class="success-card p-6">
            <h2 class="text-xl font-bold text-gray-900 mb-4">è®¢å•è¯¦æƒ…</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- ç¼–è¾‘å‚æ•° -->
                <div>
                    <h3 class="font-semibold text-gray-700 mb-3">ç¼–è¾‘å‚æ•°</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">ç¼©æ”¾æ¯”ä¾‹ï¼š</span>
                            <span class="font-semibold">[[ "%.1f"|format(order.edit_params.scale * 100) ]]%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">æ—‹è½¬è§’åº¦ï¼š</span>
                            <span class="font-semibold">[[ order.edit_params.rotation ]]Â°</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ä½ç½®åç§»ï¼š</span>
                            <span class="font-semibold">X: [[ order.edit_params.offset_x ]]px, Y: [[ order.edit_params.offset_y ]]px</span>
                        </div>
                    </div>
                </div>
                
                <!-- å§å”§è§„æ ¼ -->
                <div>
                    <h3 class="font-semibold text-gray-700 mb-3">å§å”§è§„æ ¼</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">å°ºå¯¸ï¼š</span>
                            <span class="font-semibold">[[ order.baji_specs.size ]]mm</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">åˆ†è¾¨ç‡ï¼š</span>
                            <span class="font-semibold">[[ order.baji_specs.dpi ]] DPI</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">æ ¼å¼ï¼š</span>
                            <span class="font-semibold">[[ order.baji_specs.format.upper() ]]</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">è´¨é‡ï¼š</span>
                            <span class="font-semibold">[[ order.baji_specs.quality ]]%</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ç”¨æˆ·åå¥½ -->
            [% if order.user_preferences  %]
            <div class="mt-6">
                <h3 class="font-semibold text-gray-700 mb-3">å¤„ç†é€‰é¡¹</h3>
                <div class="flex flex-wrap gap-2">
                    [% if order.user_preferences.auto_enhance  %]
                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">è‡ªåŠ¨å¢å¼º</span>
                    [% endif  %]
                    [% if order.user_preferences.color_correction  %]
                    <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">é¢œè‰²æ ¡æ­£</span>
                    [% endif  %]
                    [% if order.user_preferences.sharpening  %]
                    <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm">é”åŒ–å¤„ç†</span>
                    [% endif  %]
                    [% if order.user_preferences.smart_crop  %]
                    <span class="bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm">æ™ºèƒ½è£å‰ª</span>
                    [% endif  %]
                </div>
            </div>
            [% endif  %]
        </div>
        
        <!-- åº•éƒ¨ä¿¡æ¯ -->
        <div class="text-center mt-8 text-gray-500 text-sm">
            <p>æ„Ÿè°¢ä½¿ç”¨å§å”§ç”Ÿæˆå™¨ï¼</p>
            <p class="mt-2">"ç®€å•æ˜¯ç»ˆæçš„å¤æ‚" - å²è’‚å¤«Â·ä¹”å¸ƒæ–¯</p>
        </div>
    </div>
</body>
</html>
