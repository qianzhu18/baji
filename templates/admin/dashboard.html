<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®¡ç†åå° - å§å”§ç”Ÿæˆå™¨</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="[[ url_for('static', filename='js/magic-experience.js')  ]]"></script>
    <link rel="stylesheet" href="[[ url_for('static', filename='css/admin-mobile.css')  ]]">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }
        .stat-card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        .stat-card.clickable:hover {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }
        .nav-item {
            transition: all 0.2s ease;
        }
        .nav-item:hover {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }
        .nav-item.active {
            background: #3b82f6;
            color: white;
        }
    </style>
</head>
<body>
    <div id="app" class="min-h-screen">
        <!-- ç§»åŠ¨ç«¯é¡¶éƒ¨å¯¼èˆªæ  -->
        <div class="mobile-header">
            <h1>ğŸ ç®¡ç†åå°</h1>
            <button class="mobile-menu-btn" @click="toggleMobileMenu">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>
        
        <!-- ç§»åŠ¨ç«¯é®ç½©å±‚ -->
        <div class="mobile-overlay" :class="{ show: mobileMenuOpen }" @click="closeMobileMenu"></div>
        
        <!-- ç§»åŠ¨ç«¯ä¾§è¾¹æ  -->
        <div class="mobile-sidebar" :class="{ open: mobileMenuOpen }">
            <nav>
                <a href="/admin/dashboard" class="nav-item active">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
                    </svg>
                    ä»ªè¡¨ç›˜
                </a>
                <a href="/admin/orders" class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                    </svg>
                    è®¢å•ç®¡ç†
                </a>
                <a href="/admin/coupons" class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
                    </svg>
                    åˆ¸ç ç®¡ç†
                </a>
                <a href="/admin/cases" class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    æ¡ˆä¾‹ç®¡ç†
                </a>
                <a href="/admin/print" class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
                    </svg>
                    æ‰“å°ç®¡ç†
                </a>
                <a href="/admin/delivery" class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                    </svg>
                    é…é€ç®¡ç†
                </a>
                <a href="/admin/devices" class="nav-item">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                    </svg>
                    è®¾å¤‡ç®¡ç†
                </a>
                <button @click="logout" class="nav-item text-red-600 hover:bg-red-50">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                    </svg>
                    é€€å‡ºç™»å½•
                </button>
            </nav>
        </div>
        
        <!-- æ¡Œé¢ç‰ˆä¾§è¾¹æ  -->
        <div class="desktop-sidebar fixed inset-y-0 left-0 w-64 bg-white shadow-lg">
            <div class="p-6">
                <h1 class="text-xl font-bold text-gray-900 mb-8">ğŸ ç®¡ç†åå°</h1>
                
                <nav class="space-y-2">
                    <a href="/admin/dashboard" class="nav-item active flex items-center px-4 py-3 rounded-lg">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
                        </svg>
                        ä»ªè¡¨ç›˜
                    </a>
                    <a href="/admin/orders" class="nav-item flex items-center px-4 py-3 rounded-lg">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                        </svg>
                        è®¢å•ç®¡ç†
                    </a>
                    <a href="/admin/coupons" class="nav-item flex items-center px-4 py-3 rounded-lg">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
                        </svg>
                        åˆ¸ç ç®¡ç†
                    </a>
                    <a href="/admin/cases" class="nav-item flex items-center px-4 py-3 rounded-lg">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        æ¡ˆä¾‹ç®¡ç†
                    </a>
                    <a href="/admin/print" class="nav-item flex items-center px-4 py-3 rounded-lg">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
                        </svg>
                        æ‰“å°ç®¡ç†
                    </a>
                    <a href="/admin/delivery" class="nav-item flex items-center px-4 py-3 rounded-lg">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                        </svg>
                        é…é€ç®¡ç†
                    </a>
                <a href="/admin/devices" class="nav-item flex items-center px-4 py-3 rounded-lg">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                    </svg>
                    è®¾å¤‡ç®¡ç†
                </a>
                </nav>
                
                <div class="mt-8 pt-8 border-t border-gray-200">
                    <button @click="logout" class="w-full flex items-center px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                        </svg>
                        é€€å‡ºç™»å½•
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ä¸»å†…å®¹åŒº -->
        <div class="main-content ml-64 p-8">
            <div class="responsive-container">
                <h2 class="page-title text-3xl font-bold text-gray-900 mb-8">ä»ªè¡¨ç›˜</h2>
                
                <!-- ç»Ÿè®¡å¡ç‰‡ -->
                <div class="stats-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="stat-card clickable p-6" @click="navigateToOrders">
                        <div class="flex items-center">
                            <div class="stat-icon p-3 bg-blue-100 rounded-lg">
                                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="stat-label text-sm font-medium text-gray-600">ä»Šæ—¥è®¢å•</p>
                                <p class="stat-value text-2xl font-bold text-gray-900" v-text="stats.today_orders || 0"></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card clickable p-6" @click="navigateToOrders">
                        <div class="flex items-center">
                            <div class="stat-icon p-3 bg-yellow-100 rounded-lg">
                                <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="stat-label text-sm font-medium text-gray-600">å¾…å¤„ç†è®¢å•</p>
                                <p class="stat-value text-2xl font-bold text-gray-900" v-text="stats.pending_orders || 0"></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card clickable p-6" @click="navigateToOrders">
                        <div class="flex items-center">
                            <div class="stat-icon p-3 bg-green-100 rounded-lg">
                                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="stat-label text-sm font-medium text-gray-600">ä»Šæ—¥æ”¶å…¥</p>
                                <p class="stat-value text-2xl font-bold text-gray-900" v-text="revenueText(stats.today_revenue)"></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card clickable p-6" @click="navigateToCoupons">
                        <div class="flex items-center">
                            <div class="stat-icon p-3 bg-purple-100 rounded-lg">
                                <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
                                </svg>
                            </div>
                            <div class="ml-4">
                                <p class="stat-label text-sm font-medium text-gray-600">åˆ¸ç ä½¿ç”¨</p>
                                <p class="stat-value text-2xl font-bold text-gray-900" v-text="stats.coupon_usage || 0"></p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- å¿«é€Ÿæ“ä½œ -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="stat-card p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">å¿«é€Ÿæ“ä½œ</h3>
                        <div class="space-y-3">
                            <button @click="generateCoupons" class="w-full text-left p-3 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 text-blue-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                    </svg>
                                    <span class="text-blue-800 font-medium">ç”Ÿæˆåˆ¸ç </span>
                                </div>
                            </button>
                            <button @click="exportPDF" class="w-full text-left p-3 bg-green-50 hover:bg-green-100 rounded-lg transition-colors">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 text-green-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                    </svg>
                                    <span class="text-green-800 font-medium">å¯¼å‡ºPDF</span>
                                </div>
                            </button>
                        </div>
                    </div>
                    
                    <div class="stat-card p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">æœ€è¿‘è®¢å•</h3>
                        <div class="space-y-3">
                            <div v-for="order in recentOrders" :key="order.id" class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <p class="font-medium text-gray-900" v-text="order.order_no"></p>
                                    <p class="text-sm text-gray-600" v-text="formatDate(order.created_at)"></p>
                                </div>
                                <span :class="getStatusColor(order.status)" class="px-2 py-1 rounded-full text-xs font-medium">
                                    <span v-text="getStatusText(order.status)"></span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, onMounted } = Vue;
        
        createApp({
            setup() {
                const stats = ref({});
                const recentOrders = ref([]);
                const mobileMenuOpen = ref(false);
                
                const loadDashboardData = async () => {
                    try {
                        // è°ƒç”¨å®é™…çš„APIè·å–æ•°æ®
                        const response = await fetch('/api/v1/admin/dashboard/stats');
                        const data = await response.json();
                        
                        if (data) {
                            stats.value = {
                                today_orders: data.today_orders || 0,
                                pending_orders: data.pending_orders || 0,
                                today_revenue: data.today_revenue || 0,
                                coupon_usage: data.coupon_usage || 0
                            };
                        } else {
                            // ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ä½œä¸ºåå¤‡
                            stats.value = {
                                today_orders: 12,
                                pending_orders: 5,
                                today_revenue: 180,
                                coupon_usage: 8
                            };
                        }
                        
                        // åŠ è½½æœ€è¿‘è®¢å•
                        const ordersResponse = await fetch('/api/v1/admin/orders?per_page=5');
                        const ordersData = await ordersResponse.json();
                        
                        if (ordersData.orders) {
                            recentOrders.value = ordersData.orders;
                        } else {
                            recentOrders.value = [
                                { id: 1, order_no: 'BJI20240101001', status: 'processing', created_at: '2024-01-01T10:30:00' },
                                { id: 2, order_no: 'BJI20240101002', status: 'completed', created_at: '2024-01-01T09:15:00' },
                                { id: 3, order_no: 'BJI20240101003', status: 'pending', created_at: '2024-01-01T08:45:00' }
                            ];
                        }
                        
                        // è§¦å‘é­”æ³•æ•ˆæœ
                        if (window.MagicExperience) {
                            window.MagicExperience.showMagicNotification('æ•°æ®åŠ è½½å®Œæˆï¼', 'success', 2000);
                        }
                    } catch (error) {
                        console.error('åŠ è½½ä»ªè¡¨ç›˜æ•°æ®å¤±è´¥:', error);
                        if (window.MagicExperience) {
                            window.MagicExperience.showMagicNotification('æ•°æ®åŠ è½½å¤±è´¥', 'error', 3000);
                        }
                    }
                };
                
                const toggleMobileMenu = () => {
                    mobileMenuOpen.value = !mobileMenuOpen.value;
                };
                
                const closeMobileMenu = () => {
                    mobileMenuOpen.value = false;
                };
                
                const logout = async () => {
                    try {
                        if (window.MagicExperience) {
                            window.MagicExperience.showMagicNotification('æ­£åœ¨é€€å‡º...', 'info', 1000);
                        }
                        
                        await fetch('/api/v1/admin/logout', { method: 'POST' });
                        
                        if (window.MagicExperience) {
                            window.MagicExperience.showMagicNotification('é€€å‡ºæˆåŠŸï¼', 'success', 1000);
                        }
                        
                        setTimeout(() => {
                            window.location.href = '/admin/login';
                        }, 1000);
                    } catch (error) {
                        console.error('é€€å‡ºç™»å½•å¤±è´¥:', error);
                        if (window.MagicExperience) {
                            window.MagicExperience.showMagicNotification('é€€å‡ºå¤±è´¥', 'error', 3000);
                        }
                    }
                };
                
                const generateCoupons = () => {
                    if (window.MagicExperience) {
                        window.MagicExperience.showMagicNotification('è·³è½¬åˆ°åˆ¸ç ç®¡ç†...', 'info', 1000);
                    }
                    setTimeout(() => {
                        window.location.href = '/admin/coupons';
                    }, 500);
                };
                
                const exportPDF = () => {
                    if (window.MagicExperience) {
                        window.MagicExperience.showMagicNotification('è·³è½¬åˆ°æ‰“å°ç®¡ç†...', 'info', 1000);
                    }
                    setTimeout(() => {
                        window.location.href = '/admin/print';
                    }, 500);
                };
                
                const navigateToOrders = () => {
                    if (window.MagicExperience) {
                        window.MagicExperience.showMagicNotification('è·³è½¬åˆ°è®¢å•ç®¡ç†...', 'info', 1000);
                    }
                    setTimeout(() => {
                        window.location.href = '/admin/orders';
                    }, 500);
                };
                
                const navigateToCoupons = () => {
                    if (window.MagicExperience) {
                        window.MagicExperience.showMagicNotification('è·³è½¬åˆ°åˆ¸ç ç®¡ç†...', 'info', 1000);
                    }
                    setTimeout(() => {
                        window.location.href = '/admin/coupons';
                    }, 500);
                };
                
                const formatDate = (dateString) => {
                    return new Date(dateString).toLocaleString('zh-CN');
                };
                
                const getStatusColor = (status) => {
                    const colors = {
                        'pending': 'bg-yellow-100 text-yellow-800',
                        'processing': 'bg-blue-100 text-blue-800',
                        'pending_print': 'bg-orange-100 text-orange-800',
                        'printed': 'bg-purple-100 text-purple-800',
                        'completed': 'bg-green-100 text-green-800',
                        'cancelled': 'bg-red-100 text-red-800'
                    };
                    return colors[status] || 'bg-gray-100 text-gray-800';
                };
                
                const getStatusText = (status) => {
                    const texts = {
                        'pending': 'å¾…å¤„ç†',
                        'processing': 'å¤„ç†ä¸­',
                        'pending_print': 'å¾…æ‰“å°',
                        'printed': 'å·²æ‰“å°',
                        'completed': 'å·²å®Œæˆ',
                        'cancelled': 'å·²å–æ¶ˆ'
                    };
                    return texts[status] || status;
                };
                
                onMounted(() => {
                    // åˆå§‹åŒ–Magic Experienceç³»ç»Ÿ
                    if (window.MagicExperience) {
                        window.MagicExperience.init();
                        
                        // ä¸ºæ‰€æœ‰æŒ‰é’®æ·»åŠ é­”æ³•æ•ˆæœ
                        document.querySelectorAll('button').forEach(button => {
                            window.MagicExperience.addMagicButtonEffect(button);
                        });
                        
                        // ä¸ºæ‰€æœ‰å¡ç‰‡æ·»åŠ é­”æ³•æ•ˆæœ
                        document.querySelectorAll('.stat-card').forEach(card => {
                            window.MagicExperience.addMagicCardEffect(card);
                        });
                        
                        // æ˜¾ç¤ºæ¬¢è¿é€šçŸ¥
                        window.MagicExperience.showMagicNotification('æ¬¢è¿æ¥åˆ°ç®¡ç†åå°ï¼', 'success', 3000);
                    }
                    
                    loadDashboardData();
                });
                
                // è®¡ç®—å±æ€§
                const revenueText = (revenue) => `Â¥${revenue || 0}`;
                
                return {
                    stats,
                    recentOrders,
                    mobileMenuOpen,
                    toggleMobileMenu,
                    closeMobileMenu,
                    logout,
                    generateCoupons,
                    exportPDF,
                    navigateToOrders,
                    navigateToCoupons,
                    formatDate,
                    getStatusColor,
                    getStatusText,
                    revenueText
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
